### Geo Application Control HW

[Читайте REST API](REST_API.md)

## 1. Требования

    1. Для использования данного сайт пользователь должен зарегистрирован в системе
    2. Каждый пользователь может создать свой чат
    3. Каждый пользователь может добавлять собеседников либо через шаринг ссылки чата, либо через поиск друга в самой системе
    4. Каждый пользователь может добавить себе друга
    5. Для каждого чата создается отдельная страница с картой, панели с контролами и сообщениями
    6. На карте можно размещать как текстовые сообщения, так и различные геометрические примитивы, картинки и комментарии
    7. Чат должен быть интерактивным в режиме реального времени
    8. Пользователь может удалять себя из чата
    9. Пользователь может удалять из чата собеседника
    10. Пользователь может удалять сам чат
    11. Пользователь может удалить свою страницу
    12. Пользователь должен иметь возможность редактировать свои личные данные
    13. Все сообщения, комментарии чата, отметки на карте должны быть сохранены в базе данных
    14. Отметки на карте можно менять, удалять и передвигать
    15. Пользователь может искать интересующие сообщения по меткам, ключевым словам и адресам
    16. Пользователь может искать места по меткам, ключевым словам и адресам
    17. Создатель чата может настроить уровни доступа чата: публичный (для всех пользователей) и приватный (только для друзей)
    18. Пользователь может просматривать сообщения, комментарии, метки всех публичных чатов
    19. Пользователь может просматривать статистику и аналитику публичных чатов
    
## 2. Распределение задач
        
    2.1 Ирина
    
        2.2.1 Разработка интерфейса главной страницы
        2.1.2 Разработка интерфейса страницы регистрации и аутентификации
        2.1.3 Создание чата с возможностью шаринга
        2.1.4 Визуализация аналитики 
        2.1.5 Декодирования местоположения, поиск по тегам и ключевым словам
        
    2.2 Павел
        
        2.2.1 Написать логику регистрации пользователя
        2.2.2 Написать логику аутентификации пользователя
        2.2.3 Разработать личную страницу пользователя с возможностью
              редактирования личных данных
        2.2.4 Добавление собеседников в чат (по ссылке и на самом сайте)
        2.2.5 Получение аналитики с сервера
        
### 3. Подробная инструкция работы

1) Перейти в папку и в консольной строке ввести: 
git clone https://github.com/vespera128bit/geochw.git

![Step 1](img/Step1.png)

2) Открыть Idea и импортировать проект, затем следовать инструкциям

![Step 2](img/Step2.png)

3) Ничего не меняйте

![Step 3](img/Step3.png)

4) Ничего не меняйте

![Step 4](img/Step4.png)

5) Ничего не меняйте

![Step 5](img/Step5.png)

6) Ничего не меняйте

![Step 6](img/Step6.png)

7) Должно появиться окно с проектом. 
   На верхней панеле должны быть две кнопки со стрелками и надписью VCS, значит git распознался

![Step 7](img/Step7.png)

8) Запустите проект

![Step 8](img/Step8.png)

9) Сервер должен быть собран и запущен. Если появилась строчка "Started application и бла бла"
значит все OK

![Step 9](img/Step9.png)

10) Введите в браузер localhost:8080. Если появился волшебный кот, вжух и все OK

![Step 10](img/Step10.png)

После проделанных шагов нужно начать выполнять задачи, приведенные ниже.

        Task Summary:
        
        Ирина:
        1. Регистрация, авторизация и аутентификация пользователя
        2. Обработка личных данных пользователей
        3. Визуализация аналитики и статистики
        
        Павел:
        1. Чат, передача сообщений
        2. Сохранение меток, геометрических примитивов, комментариев и картинок* на карте
        3. Сбор аналитики и статистики
        
        Full Task Specification:
        
        Ирина:
        1 Регистрация, авторизация и аутентификация пользователя
            1.1 В папке /src/main/resources открыть файл для редактирования index.html 
            1.2 Файл index.html служит главной страницей 
            1.3 На главной странице должно быть приветствие (простое), ссылка на страницу с регистрацией, 
            форма для входа
            1.4 Необходимо разработать логику редиректа с главной страницы на страницу с регистрацией, а также
            логику аутентификации (входа в систему) пользователя
            1.5 После этого в файле signup.html нужно разработать интерфейс и логику для регистрации
            1.6 В index.html сделать ссылку на signup.html
            1.7 Для регистрации и аутентификации пользователя нужно реализовать обращение к серверу, см. REST API
        
        2. Обработка личных данных пользователей
                    2.1 Необходимо реализовать логику изменения личных данных пользователя, удаление страницы и добавление 
                    друзей
                    2.2 Задачу нужно выполнить в personal_page.html
                    
        
        3. Визуализация аналитики и статистики
            ОТДЕЛЬНОЕ ОБСУЖДЕНИЕ
        
        Павел:
        1. Чат, передача сообщений
            1.1 Необходимо реализовать логику создания чата, изменения и удаления
            1.2 Каждый чат может быть как публичным, так и приватным; Публичный виден всем пользователям сайта,
            приватный - только самим собеседникам
            1.3 Владельцем чата является его создатель
            1.4 Владелец может добавлять собеседников путем шаринга ссылки или поиском других пользователей 
            в поисковой строке
            1.5 Все сообщения должны передаваться по вебсокетам в режиме реального времени
            1.6 Задачу нужно выполнить в chat.html
            1.7 На странице chat.html будет размещена карта, список чатов пользователя, сам чат с сообщениями
                и панель для рисования
       
        2. Сохранение меток, геометрических примитивов, комментариев и картинок* на карте:
                    2.1 На карте с использованием Leaflet Draw нужно реализовать рисование и добавление меток
                    2.2 Пользователь может наносить метки с текстом, рисовать окружности, полигоны, мультиполигоны и линии
                    2.3 Каждый из объектов может быть изменен, удален и перемещен
                    2.4 При нажатии правой кнопкой мышки на карте должно появиться меню, в котором будут пункты 
                    для сохранения всех меток и примитивов на карте
                    2.5 Необходимо реализовать возможность отправки изменений на сервер в режиме реального времени
                    2.6 Задачу небходимо выполнить в chat.html
                    2.7 На странице chat.html будет размещена карта, список чатов пользователя, сам чат с сообщениями
                    и панель для рисования
                    
        3. Сбор статистики
            ОТДЕЛЬНОЕ ОБСУЖДЕНИЕ
        
### 4. Технологии

    Back-End:
    1. PostgreSQL
    2. Postgis
    3. Geohash
    4. Spring MVC, JDBC, WebSocket
    5. Google Protobuffers
    
    Front-End
    1. Leaflet
    2. Leaflet Draw, Drag
    3. Terraformer WKT reader
    4. JSTS
    5. Plotly
    6. CartoDB (optional)
    7. Bootstrap
    8. JQuery
    
### 5. REST API

    1. POST /user
    2. PUT /user
    3. DELETE /user
    4. POST /user/auth
    5. POST /user/{userId}/chat/new
    6. PUT /chat
    7. DELETE /chat
    8. GET /user/{userId}/chats
    9. POST /user/{userId}/chat/{chatId}
    10. SEND* /chat/{chatId}/message/new 
    11. SUBSCRIBE* /chat/{chatId}/message/broacast
    12. SEND* /chat/{chatId}/note/new
    13. SUBSCRIBE* /chat/{chatId}/note/broadcast
    
    * STOMP 
